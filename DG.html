
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Decision Game</title>
  <style>
    body { font-family: Arial, sans-serif; background: white; color: black; text-align: center; margin: 0; padding: 20px; }
    .header { margin-bottom: 20px; }
    #initials-input { font-size: 1.2em; width: 60px; text-align: center; }
    #initials-note { font-size: 0.9em; color: #555; margin-top: 5px; }
    .game-controls, .leaderboard-section { margin-top: 20px; }
    .leaderboard-table { width: 100%; max-width: 600px; margin: auto; border-collapse: collapse; }
    .leaderboard-table th, .leaderboard-table td { padding: 6px 12px; border: 1px solid #ccc; }
    .leaderboard-table th { background: #eee; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Decision Game</h1>
    <label for="initials-input">Your Initials:</label>
    <input type="text" id="initials-input" maxlength="3" />
    <div id="initials-note">Initials can be changed before each game. Pressing start means you accept the initials shown.</div>
  </div>

  <div class="game-controls">
    <button id="start-button">Start</button>
    <button id="stop-button" disabled>Stop</button>
  </div>

  <div class="leaderboard-section">
    <h2>Leaderboard</h2>
    <table class="leaderboard-table" id="leaderboard-table">
      <thead>
        <tr><th>Rank</th><th>Initials</th><th>Correct</th><th>Mistakes</th><th>Avg Time</th><th>Total Time</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    // Store/load initials
    const initialsInput = document.getElementById('initials-input');
    const savedInitials = localStorage.getItem('playerInitials');
    if (savedInitials) initialsInput.value = savedInitials;

    document.getElementById('start-button').addEventListener('click', () => {
      const initials = initialsInput.value.toUpperCase().trim().slice(0, 3);
      if (!initials) return alert('Please enter your initials');
      localStorage.setItem('playerInitials', initials);
      initialsInput.disabled = true;
      // startGame(); // replace with actual game function
    });

    document.getElementById('stop-button').addEventListener('click', () => {
      initialsInput.disabled = false;
      // stopGame(); // replace with actual game function
    });

    // Simulate leaderboard fetch (replace with actual fetch later)
    const dummyResults = [
      { initials: "ALI", correct: 20, mistakes: 0, avgReaction: 0.52, totalTime: 10.4 },
      { initials: "JAY", correct: 19, mistakes: 1, avgReaction: 0.61, totalTime: 11.3 },
      { initials: "KIM", correct: 18, mistakes: 2, avgReaction: 0.67, totalTime: 12.5 },
    ];
    dummyResults.sort((a, b) => {
      const ma = a.mistakes, mb = b.mistakes;
      if (ma !== mb) return ma - mb;
      if (a.avgReaction !== b.avgReaction) return a.avgReaction - b.avgReaction;
      return a.totalTime - b.totalTime;
    });

    const tbody = document.querySelector("#leaderboard-table tbody");
    dummyResults.forEach((r, i) => {
      const row = `<tr><td>${i+1}</td><td>${r.initials}</td><td>${r.correct}</td><td>${r.mistakes}</td><td>${r.avgReaction.toFixed(2)}</td><td>${r.totalTime.toFixed(1)}</td></tr>`;
      tbody.insertAdjacentHTML('beforeend', row);
    });
  </script>
</body>
</html>
